{"ast":null,"code":"import _regeneratorRuntime from\"/home/savera/letmefit/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/savera/letmefit/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectWithoutProperties from\"/home/savera/letmefit/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"/home/savera/letmefit/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/savera/letmefit/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _excluded=[\"showPassword\"];import React,{useContext}from\"react\";import{Card,CardContent,Typography,TextField,InputAdornment,IconButton,OutlinedInput,FormControl,InputLabel}from\"@mui/material\";import LoadingButton from\"@mui/lab/LoadingButton\";import{Visibility,VisibilityOff,LockOpen}from\"@mui/icons-material\";import useLoginUser from\"query/userQueries/useLoginUser\";import{useNavigate}from\"react-router-dom\";import AuthContext from\"context/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var navigate=useNavigate();var _useContext=useContext(AuthContext),addUser=_useContext.addUser,triggerSnackbar=_useContext.triggerSnackbar;var _React$useState=React.useState({email:\"\",password:\"\",showPassword:false}),_React$useState2=_slicedToArray(_React$useState,2),values=_React$useState2[0],setValues=_React$useState2[1];var _useLoginUser=useLoginUser(),loginMutation=_useLoginUser.mutate,isLoading=_useLoginUser.isLoading,loginStatus=_useLoginUser.status;var handleEmailChange=function handleEmailChange(e){e.preventDefault();setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{email:e.target.value});});};var handlePasswordChange=function handlePasswordChange(e){e.preventDefault();setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{password:e.target.value});});};var handleSubmit=function handleSubmit(){var showPassword=values.showPassword,rest=_objectWithoutProperties(values,_excluded);loginMutation(rest,{onSuccess:function(){var _onSuccess=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:triggerSnackbar(\"Logged in successfully!\");addUser(data);navigate(\"/dashboard/incomes\",{replace:true});case 3:case\"end\":return _context.stop();}}},_callee);}));function onSuccess(_x){return _onSuccess.apply(this,arguments);}return onSuccess;}()});};var handleClickShowPassword=function handleClickShowPassword(){setValues(function(prev){return _objectSpread(_objectSpread({},prev),{},{showPassword:!prev.showPassword});});};var handleMouseDownPassword=function handleMouseDownPassword(event){event.preventDefault();};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"div\",children:\"Login\"}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Email\",name:\"Email\",margin:\"normal\",variant:\"outlined\",fullWidth:true,onChange:handleEmailChange}),/*#__PURE__*/_jsxs(FormControl,{sx:{m:\"0.5rem 0px 2rem 0px\",width:\"100%\"},variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"outlined-adornment-password\",children:\"Password\"}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"outlined-adornment-password\",label:\"Password\",name:\"Password\",type:values!==null&&values!==void 0&&values.showPassword?\"text\":\"password\",onChange:handlePasswordChange,endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:handleClickShowPassword,onMouseDown:handleMouseDownPassword,edge:\"end\",children:values.showPassword?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})}),fullWidth:true})]}),/*#__PURE__*/_jsx(LoadingButton,{variant:\"contained\",endIcon:/*#__PURE__*/_jsx(LockOpen,{}),onClick:handleSubmit,loading:isLoading,loadingPosition:\"end\",children:\"Log in\"})]})});};export default LoginForm;","map":{"version":3,"names":["React","useContext","Card","CardContent","Typography","TextField","InputAdornment","IconButton","OutlinedInput","FormControl","InputLabel","LoadingButton","Visibility","VisibilityOff","LockOpen","useLoginUser","useNavigate","AuthContext","LoginForm","navigate","addUser","triggerSnackbar","useState","email","password","showPassword","values","setValues","loginMutation","mutate","isLoading","loginStatus","status","handleEmailChange","e","preventDefault","prev","target","value","handlePasswordChange","handleSubmit","rest","onSuccess","data","replace","handleClickShowPassword","handleMouseDownPassword","event","m","width"],"sources":["/home/savera/letmefit/client/src/components/loginPage/LoginForm.tsx"],"sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport {\n  Card,\n  CardContent,\n  Typography,\n  TextField,\n  InputAdornment,\n  IconButton,\n  OutlinedInput,\n  FormControl,\n  InputLabel,\n} from \"@mui/material\";\nimport LoadingButton from \"@mui/lab/LoadingButton\";\nimport { Visibility, VisibilityOff, LockOpen } from \"@mui/icons-material\";\nimport useLoginUser from \"query/userQueries/useLoginUser\";\nimport { useNavigate } from \"react-router-dom\";\nimport AuthContext from \"context/AuthContext\";\n\nconst LoginForm = () => {\n  const navigate = useNavigate();\n  const { addUser, triggerSnackbar } = useContext(AuthContext);\n  const [values, setValues] = React.useState({\n    email: \"\",\n    password: \"\",\n    showPassword: false,\n  });\n\n  const {\n    mutate: loginMutation,\n    isLoading,\n    status: loginStatus,\n  } = useLoginUser();\n\n  const handleEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    setValues((prev) => ({\n      ...prev,\n      email: e.target.value,\n    }));\n  };\n\n  const handlePasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    setValues((prev) => ({\n      ...prev,\n      password: e.target.value,\n    }));\n  };\n\n  const handleSubmit = () => {\n    const { showPassword, ...rest } = values;\n    loginMutation(rest, {\n      onSuccess: async (data) => {\n        triggerSnackbar(\"Logged in successfully!\");\n        addUser(data);\n        navigate(\"/dashboard/incomes\", { replace: true });\n      },\n    });\n  };\n\n  const handleClickShowPassword = () => {\n    setValues((prev) => ({\n      ...prev,\n      showPassword: !prev.showPassword,\n    }));\n  };\n\n  const handleMouseDownPassword = (\n    event: React.MouseEvent<HTMLButtonElement>\n  ) => {\n    event.preventDefault();\n  };\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography gutterBottom variant=\"h5\" component=\"div\">\n          Login\n        </Typography>\n        <TextField\n          id=\"outlined-basic\"\n          label=\"Email\"\n          name=\"Email\"\n          margin=\"normal\"\n          variant=\"outlined\"\n          fullWidth\n          onChange={handleEmailChange}\n        />\n        <FormControl\n          sx={{ m: \"0.5rem 0px 2rem 0px\", width: \"100%\" }}\n          variant=\"outlined\"\n        >\n          <InputLabel htmlFor=\"outlined-adornment-password\">\n            Password\n          </InputLabel>\n          <OutlinedInput\n            id=\"outlined-adornment-password\"\n            label=\"Password\"\n            name=\"Password\"\n            type={values?.showPassword ? \"text\" : \"password\"}\n            onChange={handlePasswordChange}\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"toggle password visibility\"\n                  onClick={handleClickShowPassword}\n                  onMouseDown={handleMouseDownPassword}\n                  edge=\"end\"\n                >\n                  {values.showPassword ? <VisibilityOff /> : <Visibility />}\n                </IconButton>\n              </InputAdornment>\n            }\n            fullWidth\n          />\n        </FormControl>\n        <LoadingButton\n          variant=\"contained\"\n          endIcon={<LockOpen />}\n          onClick={handleSubmit}\n          loading={isLoading}\n          loadingPosition=\"end\"\n        >\n          Log in\n        </LoadingButton>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}